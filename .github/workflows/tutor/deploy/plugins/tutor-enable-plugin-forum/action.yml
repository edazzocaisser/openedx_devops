#------------------------------------------------------------------------------
# written by: mcdaniel
# date: june-2022
#
# usage: Use tutor to enable the Open edX Discussion service plugin
#        Called from tutor_deploy.yml
#
# FIX NOTE: move to Github Actions marketplace
#------------------------------------------------------------------------------
name: enable Forum plugin for tutor
description:
branding:
  icon: 'cloud'
  color: 'orange'
inputs:
  environment-id:
    description: 'The Open edX platform environment. Examples: prod, qa, dev'
    required: true
    type: string
  namespace:
    description: 'The Kubernetes namesapce to which the Open edX platform environment will be deployed. Example: openedx-prod'
    required: true
    type: string
  openedx-common-version:
    description: 'The named release of Open edX platform to deploy. Example: open-release/maple.3'
    required: true
    type: string
runs:
  using: "composite"
  steps:
    - name: Checkout
      uses: actions/checkout@v3.0.2

    - name: Configure Discussion Forum
      run:  |-
        pip install tutor-forum
        tutor plugins enable forum
        tutor config save
