#------------------------------------------------------------------------------
# written by: mcdaniel
# date: feb-2022
#
# usage: Enable optional Open edX services for deployment to Kubernetes
#------------------------------------------------------------------------------
name: Enable Tutor plugins
description:
branding:
  icon: 'cloud'
  color: 'orange'
inputs:
  tutor-enable-plugin-s3:
    description: 'set this to true if you want to install the AWS S3 Storage plugin'
    required: false
    type: boolean
    default: false
  tutor-enable-plugin-backup:
    description: 'set this to true if you want to install the Backup & Restore plugin'
    required: false
    type: boolean
    default: false
  tutor-enable-plugin-discovery:
    description: 'set this to true if you want to install the Discovery service plugin'
    required: false
    type: boolean
    default: false
  tutor-enable-plugin-mfe:
    description: 'set this to true if you want to install the Micro Front-end service plugin'
    required: false
    type: boolean
    default: false
  tutor-enable-plugin-credentials:
    description: 'set this to true if you want to install the Credentials service plugin'
    required: false
    type: boolean
    default: false
  tutor-enable-plugin-xqueue:
    description: 'set this to true if you want to install the Xqueue service plugin'
    required: false
    type: boolean
    default: false
  tutor-enable-plugin-notes:
    description: 'set this to true if you want to install the Notes service plugin'
    required: false
    type: boolean
    default: false
  tutor-enable-plugin-ecommerce:
    description: 'set this to true if you want to install the Ecommerce service plugin'
    required: false
    type: boolean
    default: false
  tutor-enable-plugin-forum:
    description: 'set this to true if you want to install the Discussion Forum service plugin'
    required: false
    type: boolean
    default: false
runs:
  using: "composite"
  steps:
    - name: Checkout
      uses: actions/checkout@v3.0.2

    - name: Enable Tutor Plugins
      if: ${{ inputs.tutor-enable-plugin-s3 == true }}
      uses: ./.github/workflows/tutor/deploy/plugins/tutor-enable-plugin_s3

    - name: Enable the hastexo Backup & Restore plugin
      if: ${{ inputs.tutor-enable-plugin-backup == true }}
      uses: ./.github/workflows/tutor/deploy/plugins/tutor-enable-plugin-backup

    - name: Enable the Discovery plugin
      if: ${{ inputs.tutor-enable-plugin-discovery == true }}
      uses: ./.github/workflows/tutor/deploy/plugins/tutor-enable-plugin-discovery

    - name: Enable the MFE plugin
      if: ${{ inputs.tutor-enable-plugin-mfe == true }}
      uses: ./.github/workflows/tutor/deploy/plugins/tutor-enable-plugin-mfe

    - name: Enable and configure credentials plugin
      if: ${{ inputs.tutor-enable-plugin-credentials == true }}
      uses: ./.github/workflows/tutor/deploy/plugins/tutor-enable-plugin-credentials

    - name: Enable the Xqueue plugin
      if: ${{ inputs.tutor-enable-plugin-xqueue == true }}
      uses: ./.github/workflows/tutor/deploy/plugins/tutor-enable-plugin-xqueue

    - name: Enable the Notes plugin
      if: ${{ inputs.tutor-enable-plugin-notes == true }}
      uses: ./.github/workflows/tutor/deploy/plugins/tutor-enable-plugin-notes

    - name: Enable and configure ecommerce plugin
      if: ${{ inputs.tutor-enable-plugin-ecommerce == true }}
      uses: ./.github/workflows/tutor/deploy/plugins/tutor-enable-plugin-ecommerce

    - name: Configure Discussion Forum
      if: ${{ inputs.tutor-enable-plugin-forum == true }}
      uses: ./.github/workflows/tutor/deploy/plugins/tutor-enable-plugin-forum
